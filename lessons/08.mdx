import { themes, Head, Footer, Header, Steps, Notes, Invert } from 'mdx-deck'
import './styles.css'

export const theme = { ...themes.highlight }

<!-- general markup for all slides -->

<Head>
  <title>SofaScore Academy 8</title>
</Head>
<Header>
  <div className="tC m8">SofaScore Academy 2020.</div>
</Header>
<Footer>
  <div className="tR m8">Lesson 8 - Async Redux.js & Routing</div>
</Footer>

<!-- Slides -->

# Lesson 8

## Async Redux.js & Routing

---

# Async Redux

- Asynchronous operations (e.g. fetching)
  - Two crucial moments (start and finish)
- Async action creators
  - Thunks -> Return `function(dispatch) { /* do async operations */ }`

<Notes>

- Handling asynchronous operations with Redux is common use case. Each async operation has two crucial moments: start and finish.
  Those operations can be handled with at least 3 Redux actions. In fetching example those actions would be request started, request finished successfully and request failed.
- Async action creators allow developers to dispatch actions in async manner. Reducers must be pure so async operations must be performed inside async action creators.
  Those action creators return function instead of object like ordinary action creators (also known as Thunks). Returned function will be called with `dispatch` as argument.
  Calling is made possible with `redux-thunk` middleware which must be added to the redux store.
  In that function async work can be done and progress can be published (start, success, failure) with ordinary actions (dispatch is available).
  Thunks allow developers to separate more complex async logic and trigger it with single action creator call.

</Notes>

---

import { LoginThunks } from './08-files/thunks'

<Invert>

# Thunks - Example

<LoginThunks />

</Invert>

---

# Routing

- Proces of Internet navigation
- URL marks specific resource on the Internet (page, response, ...)
- Makes user navigation easier (refresh, browser back)

<Notes>
  
- Routing is process of navigating the Internet. Routing can be defined as mapping of URL to resource (website)
- Route (URL) is identifier of resource on Internet. Resource can be website, API response, method, ...
- Routing makes users experience more satisfying, as users can refresh page and end up on the same page, 
they can navigate through browser history (forward or back browser buttons), etc.
- Routing ensures that the same URL will always point to the same page (or other resource).

</Notes>

---

# Search Engine Optimization (SEO)

- Process of making a website more visible in search results
- Search engines crawl web, index content from pages, points to relevant pages in search results
- Ranking algorithm is secret, known only by search engine companies.
- More traffic -> more revenue

<Notes>
  
- Search engines (e.g. Google, Bing) crawl the web, following links between pages and indexing page content. 
This index is then used when user search for informations, as search engine can point to relevant page which is most likely to 
provide information to the user.
- Each search engine has its own secret ranking algorithm. but some parts overlap between them.
- SEO is important as it is directly connected with bigger traffic and revenue.

</Notes>

---

# Server side routing

- Route transition is handled on server
  - When URL changes, new HTML document is retrieved from the server
- Browser has to communicate with the server
- Good:
  - Minimal data for each page
  - Search engine friendly
- Bad:
  - Slower interaction between pages
  - Full refresh of a page -> Context is lost

<Notes>
  
- Classic route transition strategy. When URL changes, browser will request new HTML document for the new URL. 
HTML is then parsed and any needed resources are fetched (CSS, JS, images, fonts, ...).
- Good:
  - Each page is separate HTML document, so each page can contain minimal data needed for that page.
  - SEO benefits: Search engine crawlers are made to understand HTML markup, so they can better index each page, as it has its own HTML.
- Bad:
  - Slower interaction as browser has to wait for server response before switching pages.
  - Each route transition can be seen as full refresh. 
  Previous page context (local variables, DOM) is lost and replaced with new page context. 
  There is also a repetitive content on multiple pages (e.g. header is the same on two pages, but it has to be downloaded with each page and rendered again)

</Notes>

---

<Invert>

# Server side routing - Example

</Invert>

---

# Client side routing

- Route transition is handled on client
  - When URL changes, new HTML is not needed
- Good:
  - Faster page transitions
  - Preserves context
  - Page transitions can be animated
- Bad:
  - Larger first load
  - Possible extra data
  - Not so friendly to search engines

<Notes>

- Route transitions are handled via JavaScript. This means that JS knows what to show for each URL, so there is no need to download new HTML document.
- Good:
  - Faster page changes as there is no HTML document download included.
  - Preserves context as there is no full page refresh (variables are preserved, DOM can be preserved, ...).
  - Page transitions happen client side, within the same document, so transitions can be animated to create smooth user experience.
- Bad:
  - First page load is larger as whole app navigation has to be shipped on a client. Also there is some extra code to handle routing which makes load slower.
  - Possibly more then needed data could be sent, as all pages are sent at once.
    If user quits app without navigation to other pages, all those pages were downloaded without the real need.
  - SEO problems: search engines have to parse JS and create markup. They can do that but they can parse the page wrong.

</Notes>

---

<Invert>

# Client side routing - Example

</Invert>

---

# React Router

---

# Protected Route

---

# Server Side Rendering
